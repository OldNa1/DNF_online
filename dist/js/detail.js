"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}require(["require.config"],function(){require(["url","template","header","footer","zoom","fly"],function(t,n,i){new(function(){function e(){_classCallCheck(this,e),this.bindEvents(),this.init()}return _createClass(e,[{key:"bindEvents",value:function(){$("#header-container").on("click","#login-btn",function(){console.log(123)})}},{key:"init",value:function(){var n=this,r=Number(location.search.slice(4));$.get(t.rapBaseUrl+"zoom/type",{id:r},function(e){if(1===e.res_code){var t=e.res_body.data;t=_objectSpread({},t,{id:r}),n.data=t,n.render(t),n.addCart()}})}},{key:"render",value:function(e){$("#zoom").html(n("detail-template",{data:e})),$("#zoom_right").html(n("detail-template1",{data:e})),this.zoom()}},{key:"addCart",value:function(){var r=this,o=1;$("#zoom_right").on("click","#num_add",function(){return o++,$("#num_input").val(o),o}),$("#zoom_right").on("click","#num_reduce",function(){return--o<1&&(o=1),$("#num_input").val(o),o}),$("#zoom_right").on("click","#add-car",function(e){$("<img src='".concat(r.data.imgs[0],"' style='width:30px;height:30px;border-radius: 15px'>")).fly({start:{left:e.clientX,top:e.clientY},end:{left:$("#top-car").position().left,top:$("#top-car").position().top},onEnd:function(){i.calcCartNum()}});var t=localStorage.getItem("cart");if(r.number=o,t){t=JSON.parse(t);var n=-1;t.some(function(e,t){return n=t,e.id===r.data.id})?t[n].num+=r.number:t.push(_objectSpread({},r.data,{num:r.number}))}else t=[_objectSpread({},r.data,{num:r.number})];localStorage.setItem("cart",JSON.stringify(t))})}},{key:"zoom",value:function(){$(".hei_img").elevateZoom({gallery:"gal1",cursor:"pointer",galleryActiveClass:"active",borderSize:"1",borderColor:"#888"})}}]),e}())})});